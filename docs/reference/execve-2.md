---
sidebar_position: 240
---

# KHULNASOFT_X_SYS_EXEC

khulnasoft >= v2.5.0

[#710](https://github.com/khulnasoftproj/khulnasoft/issues/710) [#729](https://github.com/khulnasoftproj/khulnasoft/issues/729) [#1597](https://github.com/khulnasoftproj/khulnasoft/issues/1597) [#1925](https://github.com/khulnasoftproj/khulnasoft/issues/1925)

:::caution
In Windows this feature doesn't work.
In Windows, khulnasoft creates small shell scripts and bat scripts instead of `khulnasoft-proxy` and symbolic links.
And Windows doesn't support `execve(2)`, so the environment variable `KHULNASOFT_X_SYS_EXEC` is ignored.
:::

When a command `x` is executed via khulnasoft, the command is executed as the following.

1. $KHULNASOFT_ROOT_DIR/bin/x: symbolic link to khulnasoft-proxy
1. khulnasoft-proxy executes the command `khulnasoft exec -- x`
1. khulnasoft executes `x`

So the command `x` is executed via `khulnasoft-proxy` and `khulnasoft`.
Until khulnasoft v2.5.0, `khulnasoft-proxy` and `khulnasoft` executed commands as subprocess. You can confirm it by checking the process tree by `pstree` command.

e.g.

```console
$ nvim # nvim is managed by khulnasoft
$ pstree -s nvim
```

```
     \-+= 00719 shunsukesuzuki -zsh
       \-+= 09955 shunsukesuzuki nvim # khulnasoft-proxy
         \-+- 09956 shunsukesuzuki khulnasoft exec -- nvim
           \--- 09957 shunsukesuzuki /Users/shunsukesuzuki/.local/share/khulnasoftproj-khulnasoft/pkgs/github_release/github.com/neovim/neovim/v0.7.0/nvim-macos.tar.gz/nvim-osx64/bin/nvim
```

```
khulnasoft-proxy -> khulnasoft -> x
```

Sometimes this behaviour caused trouble. [#710](https://github.com/khulnasoftproj/khulnasoft/issues/710) [#1597](https://github.com/khulnasoftproj/khulnasoft/issues/1597)

From khulnasoft v2.5.0, `khulnasoft-proxy` and `khulnasoft` execute commands by [execve(2)](https://pkg.go.dev/golang.org/x/sys/unix#Exec) in Linux and macOS by default.

So extra subprocess isn't raised.

```
     \-+= 82315 shunsukesuzuki -zsh
       \-+= 82630 shunsukesuzuki nvim
```

If you feel khulnasoft becomes unstable due to this feature, you can disable this feature by the environment variable `KHULNASOFT_X_SYS_EXEC`.

```sh
export KHULNASOFT_X_SYS_EXEC=false
```
